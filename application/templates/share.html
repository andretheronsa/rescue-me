{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
    <h1>Create tracking link</h1>
    <div class="row">
        <div class="col-md-4">
            {{ wtf.quick_form(form) }}
        </div>
    </div>
    {% if url %}
        <h2 id="p1">{{ url }}</h2>
        <button onclick="copyToClipboard('#p1')">Copy link</button>
    {% endif %}
    <p>
        <br>Share this link with patient and instruct them to:<br>
        1. Follow the link<br>
        2. Press the start tracking button<br>
        3. Allow tracking on the page<br>
        Patient location will update every 30 seconds as long as the page is open and there is a connection<br>
        If page is kept open the location display will keep updating even without a connection (but not upload to server)<br>
        The tracking link will be active for 3 days
    </p>
    <h3>View all your tracks</h3>
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <script>
        function copyToClipboard(element) {
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val($(element).text()).select();
        document.execCommand("copy");
        $temp.remove();
        }
    </script>
{% endblock %}